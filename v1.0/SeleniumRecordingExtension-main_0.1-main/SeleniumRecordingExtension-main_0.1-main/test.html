<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>螢幕錄製測試</title>
</head>
<body>
  <button id="recordBtn">開始錄屏</button>
  <hr/>
  <div>
    <button id="alertBtn">顯示 Alert</button>
    <button id="promptBtn">顯示 Prompt</button>
    <button id="confirmBtn">顯示 Confirm</button>
    <div id="result" style="margin-top:10px;font-family:monospace;color:#333"></div>
  </div>
  <script>
    async function startScreenRecording() {
      try {
        const stream = await navigator.mediaDevices.getDisplayMedia({ video: true, audio: true });
        const recorder = new MediaRecorder(stream);
        const chunks = [];

        recorder.ondataavailable = e => {
          if (e.data.size > 0) {
            chunks.push(e.data);
          }
        };

        recorder.onstop = () => {
          const blob = new Blob(chunks, { type: 'video/webm' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'screen_recording.webm';
          a.click();
          URL.revokeObjectURL(url);
        };

        recorder.start();
        setTimeout(() => recorder.stop(), 5000); // 5秒後自動停止
      } catch (err) {
        alert('錄屏失敗: ' + err);
      }
    }

    document.getElementById('recordBtn').onclick = startScreenRecording;

    const resultEl = document.getElementById('result');
    document.getElementById('alertBtn').addEventListener('click', () => {
      alert('這是 Alert 視窗');
      resultEl.textContent = 'Alert 已顯示';
    });
    document.getElementById('promptBtn').addEventListener('click', () => {
      const val = prompt('請輸入一些文字:', '預設值');
      resultEl.textContent = val === null ? 'Prompt 被取消' : `Prompt 輸入: ${val}`;
    });
    document.getElementById('confirmBtn').addEventListener('click', () => {
      const ok = confirm('是否確認這個動作?');
      resultEl.textContent = ok ? 'Confirm: 使用者按下確定' : 'Confirm: 使用者按下取消';
    });
  </script>
</body>
</html>
